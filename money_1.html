<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="dest/common.css"/>
		<link rel="stylesheet" type="text/css" href="dest/money_1.css"/>
		<script type="text/javascript">
			!function(){var a="@charset \"utf-8\";html{color:#000;background:#fff;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}html *{outline:0;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{font-family:sans-serif}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}input,select,textarea{font-size:100%}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}abbr,acronym{border:0;font-variant:normal}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:500}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:500}q:before,q:after{content:''}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a:hover{text-decoration:underline}ins,a{text-decoration:none}",b=document.createElement("style");if(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet)b.styleSheet.disabled||(b.styleSheet.cssText=a);else try{b.innerHTML=a}catch(c){b.innerText=a}}();!function(a,b){function c(){var b=f.getBoundingClientRect().width;b/i>540&&(b=540*i);var c=b/10;f.style.fontSize=c+"px",k.rem=a.rem=c}var d,e=a.document,f=e.documentElement,g=e.querySelector('meta[name="viewport"]'),h=e.querySelector('meta[name="flexible"]'),i=0,j=0,k=b.flexible||(b.flexible={});if(g){console.warn("灏嗘牴鎹凡鏈夌殑meta鏍囩鏉ヨ缃缉鏀炬瘮渚�");var l=g.getAttribute("content").match(/initial\-scale=([\d\.]+)/);l&&(j=parseFloat(l[1]),i=parseInt(1/j))}else if(h){var m=h.getAttribute("content");if(m){var n=m.match(/initial\-dpr=([\d\.]+)/),o=m.match(/maximum\-dpr=([\d\.]+)/);n&&(i=parseFloat(n[1]),j=parseFloat((1/i).toFixed(2))),o&&(i=parseFloat(o[1]),j=parseFloat((1/i).toFixed(2)))}}if(!i&&!j){var p=(a.navigator.appVersion.match(/android/gi),a.navigator.appVersion.match(/iphone/gi)),q=a.devicePixelRatio;i=p?q>=3&&(!i||i>=3)?3:q>=2&&(!i||i>=2)?2:1:1,j=1/i}if(f.setAttribute("data-dpr",i),!g)if(g=e.createElement("meta"),g.setAttribute("name","viewport"),g.setAttribute("content","initial-scale="+j+", maximum-scale="+j+", minimum-scale="+j+", user-scalable=no"),f.firstElementChild)f.firstElementChild.appendChild(g);else{var r=e.createElement("div");r.appendChild(g),e.write(r.innerHTML)}a.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(c,300)},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(d),d=setTimeout(c,300))},!1),"complete"===e.readyState?e.body.style.fontSize=12*i+"px":e.addEventListener("DOMContentLoaded",function(){e.body.style.fontSize=12*i+"px"},!1),c(),k.dpr=a.dpr=i,k.refreshRem=c,k.rem2px=function(a){var b=parseFloat(a)*this.rem;return"string"==typeof a&&a.match(/rem$/)&&(b+="px"),b},k.px2rem=function(a){var b=parseFloat(a)/this.rem;return"string"==typeof a&&a.match(/px$/)&&(b+="rem"),b}}(window,window.lib||(window.lib={}));
		</script>
	</head>
	<body>
		
		<div class="wrap">
			<canvas style="width: 100;height: 100;" id="canvas"></canvas>
			<div class="lunbo">
				<div class="over">
					<ul>
						<li><img src="img/lunbo_1.png"/></li>
						<li><img src="img/lunbo_2.png"/></li>
						<li><img src="img/lunbo_3.png"/></li>
					</ul>
				</div>
			</div>
			<div class="score">
				<span class="bai">0</span>
				<span class="shi">0</span>
				<span class="ge">0</span>
				<span class="time">10</span>
			</div>
			<div class="money">
				
			</div>
			<div class="zhuan">
				
			</div>
		</div>
		
		<script src="zepto_1.1.3.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function  () {
				var w = $(window).width();
				var h = $(window).height();
				var canvans = document.querySelector('#canvas');
				var ctx = canvas.getContext('2d');
				var time2 = null;
				var time1 = null;
			    $('#canvas').attr('width', w);
			    $('#canvas').attr('height', h);
				var onoff = true;
				var total = 0;
				var img = new Image();
				img.src = 'img/mao.png';
				var img1 = new Image();
				img1.src = 'img/hand.png';
				var img2 = new Image();
				img2.src = 'img/mao_bg.png';
				var hand = {
					x: w*0.70,
					y: (h-w*0.42),
					w: w*0.22,
					h: w*0.15,
					speed: 1
				};
				var mao_num = -1;
				var obj = [];
				var mao = {
						x: w*0.2,
						y: (h-w*0.7),
						w: w*0.6,
						h: w*0.7,
						speed: 1
					}
				img1.onload=function  () {
					ctx.drawImage(img2,w*0.2,(h-w*0.7),w*0.6,w*0.7);
					drawhand();
					$(".money").on("swipeUp",move);
					$(".money").on("swipeUp",move1);
				}
				
				
				
				function drawhand () {
					ctx.clearRect(0,0,w,h);
					if (hand.y <= (h-w*0.60)) {
						hand.speed = -hand.speed;
					}
					if (hand.y > (h-w*0.42)) {
						hand.speed = -hand.speed;
					}
					hand.y-=hand.speed;
					ctx.globalAlpha = 1;
					ctx.drawImage(img2,w*0.2,(h-w*0.7),w*0.6,w*0.7);
					ctx.drawImage(img1,hand.x,hand.y,hand.w,hand.h);
					time1 = requestAnimationFrame(drawhand);
				}
				
				
				
				
				function move () {
					window.cancelAnimationFrame(time1);
					window.cancelAnimationFrame(time2);
					mao_num++;
					obj[mao_num] = {
							x: w*0.25,
							y: (h-w*0.8),
							w: w*0.5,
							h: w*0.62,
							speed: 2
					};
					mao_move();
				}
				function mao_move () {
					ctx.clearRect(0,0,w,h);
					ctx.globalAlpha = 1;
					
					ctx.drawImage(img2,w*0.2,(h-w*0.7),mao.w,w*0.7);
					for (var i=0;i<obj.length;i++) {
						obj[i].x += 1;
						obj[i].y -= 15*1;
						obj[i].w -= 2*1;
						obj[i].h -= 1;
					}
					
					
					console.log(obj.length)
					for (var i=0;i<obj.length;i++) {
						ctx.globalAlpha = 0.5;
						ctx.drawImage(img,obj[i].x,obj[i].y,obj[i].w,obj[i].h);
					}
					time2 = requestAnimationFrame(mao_move);
				}
				function move1 () {
						mao.w += 2;
						setTimeout(function  () {
							mao.w -=2;
						},10)
				}
				$(".money").on("swipeUp",function  () {
					var time = 10;
					var ge = 0;
					var shi = 0;
					var bai = 0;
					var mao = 0;
					total++;
					if (onoff) {
						onoff = false;
						$(".hand").css('display','none');
						lunbo();
//						setTimeout(function  () {
//							alert(total);
//							return;
//						},11200)
						setInterval(function  () {
							$(".time").text(time--)
						},1000)
					}
					if (total<10) {
						ge = total;
					}else if(total<100){
						ge = total%10;
						shi = Math.floor(total/10)
					}else{
						ge = total%10;
						shi = Math.floor(total/10);
						bai = Math.floor(total/100);
					}
					$(".ge").text(ge);
					$(".shi").text(shi);
					$(".bai").text(bai);
				})
				function lunbo () {
					setTimeout(function  () {
						$(".lunbo ul").animate({top: "-2.0rem"},400)
					},1000)
					setTimeout(function  () {
						$(".lunbo ul").animate({top: "-4.0rem"},400)
					},3000)
				}
			})
		</script>
	</body>
</html>

